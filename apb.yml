version: 1.0
name: elasticache-apb
description: 'Elasticache'
tags:
  - amazon
  - elasticache
  - memcached
bindable: true
async: optional
metadata:
  displayName: "Amazon ElastiCache (APB)"
  imageUrl: "https://s3.amazonaws.com/thp-aws-icons-dev/Database_AmazonElasticCache_LARGE.png"
  longDescription: "Amazon ElastiCache is a web service that makes it easy to set up, manage, and scale distributed in-memory cache environments in the cloud. It provides a high performance, resizeable, and cost-effective in-memory cache, while removing the complexity associated with deploying and managing a distributed cache environment."
  documentationUrl: "https://aws.amazon.com/documentation/elasticache/"
  providerDisplayName: "awsservicebroker"
plans:
  - name: memcached-prod
    description: 'Production Memcached Cluster on AWS Elasticache'
    free: false
    metadata:
      displayName: "Amazon ElastiCache Memcached - Production"
      longDescription: "Amazon ElastiCache is a web service that makes it easy to set up, manage, and scale distributed in-memory cache environments in the cloud. It provides a high performance, resizeable, and cost-effective in-memory cache, while removing the complexity associated with deploying and managing a distributed cache environment."
      cost: $0.00
    parameters:
      ###############
      # AWS Account Information
      ###############
      - name: aws_access_key
        required: true
        title: AWS Access Key
        description: 'AWS Access Key to authenticate to AWS with.'
        type: string
        display_group: AWS Account Information
      - name: aws_secret_key
        required: true
        title: AWS Secret Key
        description: 'AWS Secret Key to authenticate to AWS with.'
        type: string
        display_group: AWS Account Information
      - name: aws_cloudformation_role_arn
        required: true
        title: AWS Cloudformation role ARN
        description: 'IAM role ARN for use as Cloudformation Stack Role.'
        type: string
        display_group: AWS Account Information
      - name: region
        required: true
        title: AWS Region
        description: 'AWS Region to create Memcached Cluster in.'
        type: enum
        enum:
          - ap-northeast-1
          - ap-northeast-2
          - ap-south-1
          - ap-southeast-1
          - ap-southeast-2
          - ca-central-1
          - eu-central-1
          - eu-west-1
          - eu-west-2
          - sa-east-1
          - us-east-1
          - us-east-2
          - us-west-1
          - us-west-2
        default: us-west-2
      ###############
      # Elasticache Settings
      ###############
      - name: NumCacheNodes
        required: true
        title: Number of Cluster Nodes
        description: 'The number of cache nodes in the cluster.'
        type: int
        default: 2
        display_group: Elasticache Settings
      - name: EngineVersion
        required: true
        title: Engine Version
        description: 'Family to be used with cluster or parameter group'
        type: enum
        enum:
          - '1.4.34'
          - '1.4.33'
          - '1.4.24'
          - '1.4.5'
        default: "1.4.34"
        display_group: Elasticache Settings
      - name: CacheNodeType
        required: true
        title: Cache Node Type
        description: 'The compute and memory capacity of nodes in a cache cluster.'
        type: enum
        enum:
          - cache.t2.small
          - cache.t2.medium
          - cache.m3.medium
          - cache.m3.large
          - cache.m3.xlarge
          - cache.m3.2xlarge
          - cache.m4.medium
          - cache.m4.large
          - cache.m4.xlarge
          - cache.m4.2xlarge
          - cache.m4.4xlarge
          - cache.m4.10xlarge
          - cache.r4.large
          - cache.r4.xlarge
          - cache.r4.2xlarge
          - cache.r4.4xlarge
          - cache.r4.8xlarge
        default: "cache.m4.large"
        display_group: Elasticache Settings
      ###############
      # Network and Security
      ###############
      - name: VpcId
        required: true
        title: VPC ID
        description: 'VPC ID (e.g. "vpc-6c9f1a0b")'
        type: string
        display_group: Network and Security
      - name: AccessCidr
        required: true
        title: Access CIDR
        description: 'CIDR block to allow to connect to database (e.g. "10.0.0.0/16")'
        type: string
        display_group: Network and Security
      ###############
      # Maintenance
      ###############
      - name: PreferredMaintenanceWindowDay
        required: true
        title: Day of Preferred Maintenance Window
        description: 'The day of the week which Elasticache maintenance will be performed (e.g. "Mon")'
        type: enum
        enum:
          - Mon
          - Tue
          - Wed
          - Thu
          - Fri
          - Sat
          - Sun
        default: "Mon"
        display_group: Maintenance
      - name: PreferredMaintenanceWindowStartTime
        required: true
        title: Preferred Maintenance Window Start Time
        description: 'The weekly start time in UTC for the Elasticache maintenance window, must be less than Preferred Maintenance Window End Time and cannot overlap with Preferred Backup Window (e.g. "04:00")'
        type: enum
        enum:
          - '00:00'
          - '01:00'
          - '02:00'
          - '03:00'
          - '04:00'
          - '05:00'
          - '06:00'
          - '07:00'
          - '08:00'
          - '09:00'
          - '10:00'
          - '11:00'
          - '12:00'
          - '13:00'
          - '14:00'
          - '15:00'
          - '16:00'
          - '17:00'
          - '18:00'
          - '19:00'
          - '20:00'
          - '21:00'
          - '22:00'
        default: "04:00"
        display_group: Maintenance
      - name: PreferredMaintenanceWindowEndTime
        required: true
        title: Preferred Maintenance Window End Time
        description: 'The weekly end time in UTC for the Elasticache maintenance window, must be less than Preferred Maintenance Window End Time and cannot overlap with Preferred Backup Window (e.g. "04:00")'
        type: enum
        enum:
          - '00:00'
          - '01:00'
          - '02:00'
          - '03:00'
          - '04:00'
          - '05:00'
          - '06:00'
          - '07:00'
          - '08:00'
          - '09:00'
          - '10:00'
          - '11:00'
          - '12:00'
          - '13:00'
          - '14:00'
          - '15:00'
          - '16:00'
          - '17:00'
          - '18:00'
          - '19:00'
          - '20:00'
          - '21:00'
          - '22:00'
        default: "06:00"
        display_group: Maintenance
  - name: memcached-custom
    description: 'Custom Memcached Cluster on AWS Elasticache'
    free: false
    metadata:
      displayName: "Amazon ElastiCache Memcached - Custom"
      longDescription: "Amazon ElastiCache is a web service that makes it easy to set up, manage, and scale distributed in-memory cache environments in the cloud. It provides a high performance, resizeable, and cost-effective in-memory cache, while removing the complexity associated with deploying and managing a distributed cache environment."
      cost: $0.00
    parameters:
      ###############
      # AWS Account Information
      ###############
      - name: aws_access_key
        required: true
        title: AWS Access Key
        description: 'AWS Access Key to authenticate to AWS with.'
        type: string
        display_group: AWS Account Information
      - name: aws_secret_key
        required: true
        title: AWS Secret Key
        description: 'AWS Secret Key to authenticate to AWS with.'
        type: string
        display_group: AWS Account Information
      - name: aws_cloudformation_role_arn
        required: true
        title: AWS Cloudformation role ARN
        description: 'IAM role ARN for use as Cloudformation Stack Role.'
        type: string
        display_group: AWS Account Information
      - name: region
        required: true
        title: AWS Region
        description: 'AWS Region to create Memcached Cluster in.'
        type: enum
        enum:
          - ap-northeast-1
          - ap-northeast-2
          - ap-south-1
          - ap-southeast-1
          - ap-southeast-2
          - ca-central-1
          - eu-central-1
          - eu-west-1
          - eu-west-2
          - sa-east-1
          - us-east-1
          - us-east-2
          - us-west-1
          - us-west-2
        default: us-west-2
      ###############
      # Elasticache Settings
      ###############
      - name: ClusterType
        required: true
        title: Cluster Type
        description: 'The type of cluster. Specify single-node or multi-node (default).  Number of nodes must be greater than 1 for multi-node'
        type: enum
        enum: ["single-node", "multi-node"]
        default: 'multi-node'
        display_group: Elasticache Settings
      - name: NumCacheNodes
        required: true
        title: Number of Cluster Nodes
        description: 'The number of cache nodes in the cluster.'
        type: int
        default: 3
        display_group: Elasticache Settings
      - name: EngineVersion
        required: true
        title: Engine Version
        description: 'Family to be used with cluster or parameter group'
        type: enum
        enum:
          - '1.4.34'
          - '1.4.33'
          - '1.4.24'
          - '1.4.5'
        default: "1.4.34"
        display_group: Elasticache Settings
      - name: CacheNodeType
        required: true
        title: Cache Node Type
        description: 'The compute and memory capacity of nodes in a cache cluster.'
        type: enum
        enum:
          - cache.t2.small
          - cache.t2.medium
          - cache.m3.medium
          - cache.m3.large
          - cache.m3.xlarge
          - cache.m3.2xlarge
          - cache.m4.medium
          - cache.m4.large
          - cache.m4.xlarge
          - cache.m4.2xlarge
          - cache.m4.4xlarge
          - cache.m4.10xlarge
          - cache.r4.large
          - cache.r4.xlarge
          - cache.r4.2xlarge
          - cache.r4.4xlarge
          - cache.r4.8xlarge
        default: "cache.m4.large"
        display_group: Elasticache Settings
      - name: AllowVersionUpgrade
        required: true
        title: Allow Version Upgrade
        description: 'If you update the Engine Version property to a version that''s different from the DB instance''s current version, set this property to true. (values: "true", "false")'
        type: boolean
        default: true
        display_group: Elasticache Settings
      ###############
      # Network and Security
      ###############
      - name: VpcId
        required: true
        title: VPC ID
        description: 'VPC ID (e.g. "vpc-6c9f1a0b")'
        type: string
        display_group: Network and Security
      - name: PortNumber
        required: true
        title: Port Number
        description: 'The port number for the database server to listen on. (values in range 1150-65535)'
        type: int
        default: 6379
        display_group: Network and Security
      - name: AZMode
        required: true
        title: AZ Mode
        description: "Specifies whether the nodes in this Memcached cluster are created in a single Availability Zone or created across multiple Availability Zones in the cluster's region. This parameter is only supported for Memcached cache clusters. If the AZMode and PreferredAvailabilityZones are not specified, ElastiCache assumes single-az mode."
        type: enum
        enum: ["cross-az", "single-az"]
        default: "cross-az"
        display_group: Network and Security
      - name: NumberOfAvailabilityZones
        required: true
        title: Number of Availability Zones
        description: 'Quantity of subnets to use, if selecting more than 2 the region this stack is in must have at least that many Availability Zones'
        type: int
        default: 3
        display_group: Network and Security
      - name: AvailabilityZones
        required: true
        title: Availability Zones
        description: 'Comma separated list of availability zones to use, must be the same quantity as specified in Number of Availability Zones (e.g. "us-west-2a,us-west-2b,us-west-2c")'
        type: string
        default: "us-west-2a,us-west-2b,us-west-2c"
        display_group: Network and Security
      - name: CidrBlocks
        required: true
        title: CIDR Blocks
        description: 'Comma seperated list of CIDR blocks to place RDS into, must be the same quantity as specified in Number of Availability Zones (e.g. "10.0.96.0/20,10.0.112.0/20,10.0.128.0/20")'
        type: string
        display_group: Network and Security
      - name: AccessCidr
        required: true
        title: Access CIDR
        description: 'CIDR block to allow to connect to database (e.g. "10.0.0.0/16")'
        type: string
        display_group: Network and Security
      ###############
      # Maintenance
      ###############
      - name: PreferredMaintenanceWindowDay
        required: true
        title: Day of Preferred Maintenance Window
        description: 'The day of the week which Elasticache maintenance will be performed (e.g. "Mon")'
        type: enum
        enum:
          - Mon
          - Tue
          - Wed
          - Thu
          - Fri
          - Sat
          - Sun
        default: "Mon"
        display_group: Maintenance
      - name: PreferredMaintenanceWindowStartTime
        required: true
        title: Preferred Maintenance Window Start Time
        description: 'The weekly start time in UTC for the Elasticache maintenance window, must be less than Preferred Maintenance Window End Time and cannot overlap with Preferred Backup Window (e.g. "04:00")'
        type: enum
        enum:
          - '00:00'
          - '01:00'
          - '02:00'
          - '03:00'
          - '04:00'
          - '05:00'
          - '06:00'
          - '07:00'
          - '08:00'
          - '09:00'
          - '10:00'
          - '11:00'
          - '12:00'
          - '13:00'
          - '14:00'
          - '15:00'
          - '16:00'
          - '17:00'
          - '18:00'
          - '19:00'
          - '20:00'
          - '21:00'
          - '22:00'
        default: "04:00"
        display_group: Maintenance
      - name: PreferredMaintenanceWindowEndTime
        required: true
        title: Preferred Maintenance Window End Time
        description: 'The weekly end time in UTC for the Elasticache maintenance window, must be less than Preferred Maintenance Window End Time and cannot overlap with Preferred Backup Window (e.g. "04:00")'
        type: enum
        enum:
          - '00:00'
          - '01:00'
          - '02:00'
          - '03:00'
          - '04:00'
          - '05:00'
          - '06:00'
          - '07:00'
          - '08:00'
          - '09:00'
          - '10:00'
          - '11:00'
          - '12:00'
          - '13:00'
          - '14:00'
          - '15:00'
          - '16:00'
          - '17:00'
          - '18:00'
          - '19:00'
          - '20:00'
          - '21:00'
          - '22:00'
        default: "06:00"
        display_group: Maintenance
<<<<<<< HEAD
    metadata:
        displayName: "Amazon ElastiCache Memcached"
        longDescription: "Amazon ElastiCache is a web service that makes it easy to set up, manage, and scale distributed in-memory cache environments in the cloud. It provides a high performance, resizeable, and cost-effective in-memory cache, while removing the complexity associated with deploying and managing a distributed cache environment."
        imageUrl: "https://s3.amazonaws.com/thp-aws-icons-dev/Database_AmazonElasticCache_Memcached_LARGE.png"
        documentationUrl: "https://aws.amazon.com/documentation/elasticache/"
        cost: $0.00
=======
>>>>>>> c704670... update to use stack role
